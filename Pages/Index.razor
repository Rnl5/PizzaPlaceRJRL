@page "/"
@using PizzaPlaceRJRL.Shared

<PageTitle>Index</PageTitle>

<!--Menu-->

<h1>Nuestra seleccion de pizzas</h1>

@foreach (var pizza in Estado.Menu.Pizzas)
{
    <div class = "row">
        <div class ="col">
            @pizza.Nombre
        </div>
        <div class ="col text-right">
            @($"{pizza.Precio:0.00}")
        </div>
        <div class ="col"></div>
        <div class ="col">
            <img src ="@ImagenPicante(pizza.Picante)"
            alt ="@pizza.Picante" />
        </div>
        <div class ="col">
            <button class ="btn btn-success pl-4 pr-4"
                @onclick="@(() => AgregarACanasta(pizza))">
                Agregar
            </button>
        </div>
    </div>
}

<!--Fin del menu-->


@code
{
    private Estado Estado {get;} = new Estado();

    private string ImagenPicante(Picante picante) => $"images/{picante.ToString().ToLower()}.png";

    private void AgregarACanasta(Pizzas pizzas) => Estado.Canasta.Agregar(pizzas.Id);

        protected override void OnInitialized()
        {
            Estado.Menu.Agregar(
                new Pizzas(1, "Pepperoni", 8.99M, Picante.Picante));

            Estado.Menu.Agregar(
                new Pizzas(2, "Margarita", 7.99M, Picante.Nada));

            Estado.Menu.Agregar(
                new Pizzas(3, "Diabolo", 9.99M, Picante.Caliente));
        }

    
}